/**
 * Creates a unit sphere by subdividing a unit octahedron.
 * Starts with a unit octahedron and subdivides the faces,
 * projecting the resulting points onto the surface of a unit sphere.
 *
 * For the algorithm see:
 * https://sites.google.com/site/dlampetest/python/triangulating-a-sphere-recursively
 * http://sol.gfxile.net/sphere/index.html
 * http://nipy.sourceforge.net/dipy/reference/dipy.core.triangle_subdivide.html
 * http://skyview.gsfc.nasa.gov/blog/index.php/2008/12/31/skyview-to-include-healpix-and-wmap/
 *
 *        1
 *       /\
 *      /  \
 *    b/____\ c
 *    /\    /\
 *   /  \  /  \
 *  /____\/____\
 * 0      a     2
 *
 * Parameter:
 *    recursionDepth
 *    color or -1 = many colors
 *
 * For texture see:
 * http://earthobservatory.nasa.gov/Features/BlueMarble/
 *
 * @namespace cog1.data
 * @module sphere
 */

define(["exports", "data", "glMatrix"], function (exports, data) {
    "use strict";

    /**
     * Procedural calculation.
     *
     * @parameter object with fields:
     * @parameter scale
     * @parameter recursionDepth
     * @parameter color [-1 for many colors]
     */
    exports.create = function (parameter) {

        if (parameter) {
            var scale = parameter.scale;
            var recursionDepth = parameter.recursionDepth;
            var color = parameter.color;
            var textureURL = parameter.textureURL;
        }
        // Set default values if parameter is undefined.
        if (scale == undefined) {
            scale = 250;
        }
        if (recursionDepth == undefined) {
            recursionDepth = 2;
        }
        if (color == undefined) {
            color = 9;
        }
        if (textureURL == undefined) {
            textureURL = "";
        }

        // Instance of the model to be returned.
        var instance = {};

        // BEGIN exercise Sphere


        // Starting with octahedron vertices

        instance.vertices = [
			[
				1,
				0,
				0
			],
			[
				0,
				1,
				0
			],
			[
				-1,
				0,
				0
			],
			[
				0,
				-1,
				0
			],
			[
				1,
				0,
				0
			],
			[
				0,
				1,
				0
			],
			[
				-1,
				0,
				0
			],
			[
				0,
				-1,
				0
			],
			[
				0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				0.7071067811865475
			],
			[
				0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				-0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				-0.7071067811865475
			],
			[
				0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				-0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				-0.7071067811865475
			],
			[
				0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				0.9238795325112867,
				0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				0.3826834323650897
			],
			[
				0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				0.3826834323650897,
				0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				0.9238795325112867
			],
			[
				0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				0.9238795325112867,
				-0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				-0.3826834323650897
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				0.3826834323650897,
				-0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				-0.9238795325112867
			],
			[
				0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				0.9238795325112867,
				0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				0.3826834323650897
			],
			[
				0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				0.3826834323650897,
				0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				0.9238795325112867
			],
			[
				0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				0.7071067811865475
			],
			[
				0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0,
				0,
				1
			],
			[
				0,
				0,
				1
			],
			[
				0,
				0,
				1
			],
			[
				0,
				0,
				1
			],
			[
				0,
				1,
				0
			],
			[
				-1,
				0,
				0
			],
			[
				0,
				-1,
				0
			],
			[
				1,
				0,
				0
			],
			[
				0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				0.7071067811865475
			],
			[
				0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0,
				0.7071067811865475,
				0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				0.7071067811865475
			],
			[
				0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				-0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				-0.7071067811865475
			],
			[
				0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0,
				0.3826834323650897,
				0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				0.9238795325112867
			],
			[
				0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				0.9238795325112867,
				-0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				-0.3826834323650897
			],
			[
				0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0,
				0.9238795325112867,
				0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				0.3826834323650897
			],
			[
				0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				0.3826834323650897,
				-0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				-0.9238795325112867
			],
			[
				0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				0.9238795325112867,
				-0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				-0.3826834323650897
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				0.3826834323650897,
				-0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				-0.9238795325112867
			],
			[
				0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				0.9238795325112867,
				0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				0.3826834323650897
			],
			[
				0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				0.3826834323650897,
				0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				0.9238795325112867
			],
			[
				0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0,
				0.3826834323650897,
				0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				0.9238795325112867
			],
			[
				0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				0.9238795325112867,
				-0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				-0.3826834323650897
			],
			[
				0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0,
				0.9238795325112867,
				0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				0.3826834323650897
			],
			[
				0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				0.3826834323650897,
				-0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				-0.9238795325112867
			],
			[
				0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				0.9238795325112867,
				-0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				-0.3826834323650897
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				-0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				-0.8164965809277261
			],
			[
				0.3826834323650897,
				0.9238795325112867,
				0
			],
			[
				-0.9238795325112867,
				0.3826834323650897,
				0
			],
			[
				-0.3826834323650897,
				-0.9238795325112867,
				0
			],
			[
				0.9238795325112867,
				-0.3826834323650897,
				0
			],
			[
				0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				0.3826834323650897,
				-0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				-0.9238795325112867
			],
			[
				0.816496580927726,
				0.408248290463863,
				0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				0.408248290463863
			],
			[
				0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0,
				0.3826834323650897,
				0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				0.9238795325112867
			],
			[
				0.3826834323650897,
				0,
				0.9238795325112867
			],
			[
				0,
				0.9238795325112867,
				-0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				-0.3826834323650897
			],
			[
				0.9238795325112867,
				0,
				-0.3826834323650897
			],
			[
				0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				0.4082482904638631,
				0.8164965809277261
			],
			[
				-0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.4082482904638631,
				-0.4082482904638631,
				0.8164965809277261
			],
			[
				0.408248290463863,
				0.816496580927726,
				-0.408248290463863
			],
			[
				-0.816496580927726,
				0.408248290463863,
				-0.408248290463863
			],
			[
				-0.408248290463863,
				-0.816496580927726,
				-0.408248290463863
			],
			[
				0.816496580927726,
				-0.408248290463863,
				-0.408248290463863
			],
			[
				0,
				0.9238795325112867,
				0.3826834323650897
			],
			[
				-0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				-0.9238795325112867,
				0.3826834323650897
			],
			[
				0.9238795325112867,
				0,
				0.3826834323650897
			],
			[
				0,
				0.3826834323650897,
				-0.9238795325112867
			],
			[
				-0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0,
				-0.3826834323650897,
				-0.9238795325112867
			],
			[
				0.3826834323650897,
				0,
				-0.9238795325112867
			],
			[
				0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				0.7071067811865475,
				0
			],
			[
				-0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				-0.7071067811865475,
				0
			],
			[
				0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				-0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				-0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				0.7071067811865475
			],
			[
				0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				-0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				-0.7071067811865475
			],
			[
				0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				0.7071067811865475
			],
			[
				0.7071067811865475,
				0,
				0.7071067811865475
			],
			[
				0,
				0.7071067811865475,
				-0.7071067811865475
			],
			[
				-0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				-0.7071067811865475,
				-0.7071067811865475
			],
			[
				0.7071067811865475,
				0,
				-0.7071067811865475
			],
			[
				0,
				1,
				0
			],
			[
				-1,
				0,
				0
			],
			[
				0,
				-1,
				0
			],
			[
				1,
				0,
				0
			],
			[
				0,
				0,
				-1
			],
			[
				0,
				0,
				-1
			],
			[
				0,
				0,
				-1
			],
			[
				0,
				0,
				-1
			]
		];

        instance.polygonVertices = [
			[
				0,
				32,
				64
			],
			[
				1,
				33,
				65
			],
			[
				2,
				34,
				66
			],
			[
				3,
				35,
				67
			],
			[
				4,
				36,
				68
			],
			[
				5,
				37,
				69
			],
			[
				6,
				38,
				70
			],
			[
				7,
				39,
				71
			],
			[
				8,
				40,
				72
			],
			[
				9,
				41,
				73
			],
			[
				10,
				42,
				74
			],
			[
				11,
				43,
				75
			],
			[
				12,
				44,
				76
			],
			[
				13,
				45,
				77
			],
			[
				14,
				46,
				78
			],
			[
				15,
				47,
				79
			],
			[
				16,
				48,
				80
			],
			[
				17,
				49,
				81
			],
			[
				18,
				50,
				82
			],
			[
				19,
				51,
				83
			],
			[
				20,
				52,
				84
			],
			[
				21,
				53,
				85
			],
			[
				22,
				54,
				86
			],
			[
				23,
				55,
				87
			],
			[
				24,
				56,
				88
			],
			[
				25,
				57,
				89
			],
			[
				26,
				58,
				90
			],
			[
				27,
				59,
				91
			],
			[
				28,
				60,
				92
			],
			[
				29,
				61,
				93
			],
			[
				30,
				62,
				94
			],
			[
				31,
				63,
				95
			],
			[
				96,
				128,
				160
			],
			[
				97,
				129,
				161
			],
			[
				98,
				130,
				162
			],
			[
				99,
				131,
				163
			],
			[
				100,
				132,
				164
			],
			[
				101,
				133,
				165
			],
			[
				102,
				134,
				166
			],
			[
				103,
				135,
				167
			],
			[
				104,
				136,
				168
			],
			[
				105,
				137,
				169
			],
			[
				106,
				138,
				170
			],
			[
				107,
				139,
				171
			],
			[
				108,
				140,
				172
			],
			[
				109,
				141,
				173
			],
			[
				110,
				142,
				174
			],
			[
				111,
				143,
				175
			],
			[
				112,
				144,
				176
			],
			[
				113,
				145,
				177
			],
			[
				114,
				146,
				178
			],
			[
				115,
				147,
				179
			],
			[
				116,
				148,
				180
			],
			[
				117,
				149,
				181
			],
			[
				118,
				150,
				182
			],
			[
				119,
				151,
				183
			],
			[
				120,
				152,
				184
			],
			[
				121,
				153,
				185
			],
			[
				122,
				154,
				186
			],
			[
				123,
				155,
				187
			],
			[
				124,
				156,
				188
			],
			[
				125,
				157,
				189
			],
			[
				126,
				158,
				190
			],
			[
				127,
				159,
				191
			],
			[
				192,
				224,
				256
			],
			[
				193,
				225,
				257
			],
			[
				194,
				226,
				258
			],
			[
				195,
				227,
				259
			],
			[
				196,
				228,
				260
			],
			[
				197,
				229,
				261
			],
			[
				198,
				230,
				262
			],
			[
				199,
				231,
				263
			],
			[
				200,
				232,
				264
			],
			[
				201,
				233,
				265
			],
			[
				202,
				234,
				266
			],
			[
				203,
				235,
				267
			],
			[
				204,
				236,
				268
			],
			[
				205,
				237,
				269
			],
			[
				206,
				238,
				270
			],
			[
				207,
				239,
				271
			],
			[
				208,
				240,
				272
			],
			[
				209,
				241,
				273
			],
			[
				210,
				242,
				274
			],
			[
				211,
				243,
				275
			],
			[
				212,
				244,
				276
			],
			[
				213,
				245,
				277
			],
			[
				214,
				246,
				278
			],
			[
				215,
				247,
				279
			],
			[
				216,
				248,
				280
			],
			[
				217,
				249,
				281
			],
			[
				218,
				250,
				282
			],
			[
				219,
				251,
				283
			],
			[
				220,
				252,
				284
			],
			[
				221,
				253,
				285
			],
			[
				222,
				254,
				286
			],
			[
				223,
				255,
				287
			],
			[
				288,
				320,
				352
			],
			[
				289,
				321,
				353
			],
			[
				290,
				322,
				354
			],
			[
				291,
				323,
				355
			],
			[
				292,
				324,
				356
			],
			[
				293,
				325,
				357
			],
			[
				294,
				326,
				358
			],
			[
				295,
				327,
				359
			],
			[
				296,
				328,
				360
			],
			[
				297,
				329,
				361
			],
			[
				298,
				330,
				362
			],
			[
				299,
				331,
				363
			],
			[
				300,
				332,
				364
			],
			[
				301,
				333,
				365
			],
			[
				302,
				334,
				366
			],
			[
				303,
				335,
				367
			],
			[
				304,
				336,
				368
			],
			[
				305,
				337,
				369
			],
			[
				306,
				338,
				370
			],
			[
				307,
				339,
				371
			],
			[
				308,
				340,
				372
			],
			[
				309,
				341,
				373
			],
			[
				310,
				342,
				374
			],
			[
				311,
				343,
				375
			],
			[
				312,
				344,
				376
			],
			[
				313,
				345,
				377
			],
			[
				314,
				346,
				378
			],
			[
				315,
				347,
				379
			],
			[
				316,
				348,
				380
			],
			[
				317,
				349,
				381
			],
			[
				318,
				350,
				382
			],
			[
				319,
				351,
				383
			]
		];





        // Starting with octahedron vertices
        let octahedron_vertices = [
            [1.0, 0.0, 0.0], // 0
            [-1.0, 0.0, 0.0], // 1
            [0.0, 1.0, 0.0], // 2
            [0.0, -1.0, 0.0], // 3
            [0.0, 0.0, 1.0], // 4
            [0.0, 0.0, -1.0]  // 5
        ];

        let octahedron_polygonVertices = [
            [0, 4, 2],
            [2, 4, 1],
            [1, 4, 3],
            [3, 4, 0],
            [0, 2, 5],
            [2, 1, 5],
            [1, 3, 5],
            [3, 0, 5]
        ];

        // octahedron triangles

        //devide_all.call(instance, recursionDepth);
		var newvertices = octahedron_vertices;
		var newfaces = octahedron_polygonVertices;
		let amount_newfaces, step, part;
		let counter, part_counter;
		for (let i = 1; i <= recursionDepth; i++) {
			newvertices = divide_all(newvertices, newfaces);

			newfaces = [];
			amount_newfaces = (Math.pow(4, i) * 8);
			step = amount_newfaces / 4;
			part = 3*step;
			for (let i = 0; i < amount_newfaces; i++) {
				counter = i % step;
				part_counter = ((i - counter) / step) * part;
				newfaces.push([counter + part_counter, counter + step + part_counter, counter + 2*step + part_counter]);
			};
		}


        //instance.polygonVertices = [];

		/* !!!!! definitely need these uncommented to copy and paste values from browser to code here
		console.log("newvertices:");
        console.log(newvertices);

        console.log("newfaces:");
        console.log(newfaces);
		 */

		/* this isn't working for some reasin
        instance.vertices = newvertices;
        instance.polygonVertices = newfaces;*/


        // END exercise Sphere


        generateTextureCoordinates.call(instance);

        data.applyScale.call(instance, scale);
        data.setColorForAllPolygons.call(instance, color);

        instance.textureURL = textureURL;


        return instance;
    }

    /**
     * Called with this pointer set to instance.
     * Generate texture coordinates one per each corner of a polygon,
     * thus a vertex can have more than one uv, depending on the polygon it is part of.
     * The coordinates u.v represent the angles theta and phi
     * of point vector to x and y axis.
     * See:
     * http://tpreclik.dyndns.org/codeblog/?p=9
     *
     * Assume that vertices are not yet scaled, thus have length 1.
     *
     */
    function generateTextureCoordinates() {

        // BEGIN exercise Sphere-Earth-Texture

        // As there is not exactly one texture coordinate per vertex,
        // we have to install a different mapping as used for polygonVertices to vertices.
        // For texture coordinate system use openGL standard, where origin is bottom-left.
        this.textureCoord = [];
        this.polygonTextureCoord = [];


        // Loop over vertices/edges in polygon.

        // Shorthands for the current vertex.


        // Calculate longitude (east-west position) phi (u-coordinate).
        // arctangent (of here z/x), representing the angle theta between the positive X axis, and the point.
        // Scale phi to uv range [0,1].


        // Calculate latitude (north-south position) theta (v-coordinate) from y component of vertex.
        // Scale theta to uv range [0,1].


        // Store new uv coordinate in new uv-vector.
        //console.log("phi:" + (~~(phi * 100)) + "  theta:" + (~~(theta * 100)) + " x:" + (~~(x * 100)) + " z:" + (~~(z * 100)));


        // Problem with phi/u: phi=360 and phi=0 are the same point in 3D and also on a tiled texture.
        // But for faces it is a difference if uv-range is 350¡-360¡ [.9-1]or 350¡-0¡ [.9-0].
        // Thus, insert a check/hack (assuming faces cover only a small part of the texture):

        // Check if u-range should be low or high (left or right in texture),
        // by summing up u values (ignoring u=0 values).

        // Check and correct u values if 0;

        // END exercise Sphere-Earth-Texture
    }

    // BEGIN exercise Sphere

    /**
     * Recursively divide all triangles.
     */
    function devide_all(recursionDepth, nbRecusions) {
        // nbRecusions is not set from initial call.
        if (nbRecusions == undefined) {
            nbRecusions = 0;
        }
        // Stop criterion.

        //console.log("nbRecusions: "+nbRecusions);
        // Assemble divided polygons in an new array.

        // Indices of the last three new vertices.

        // Calculate new vertex in the middle of edge.

        // Check if the new vertex exists already.
        // This happens because edges always belong to two triangles.

        // Remember index of new vertex.

        //console.log("Calculate new vertex "+v+"->"+newIndex[v]+" : "+vertices[p[v]]+" + "+ vertices[p[next]]+" = "+ newVertex);

        // Use the existing vertex for the new polygon.

        //console.log("New vertex exists "+v+"->"+newIndex[v]+" : "+this.vertices[p[v]]+" + "+ this.vertices[p[next]]+" = "+ newVertex);

        // Assemble new polygons.
        // Assure mathematical positive order to keep normals pointing outwards.
        // Triangle in the center.

        // Triangle in the corners.

        //console.log("Assemble new polygons "+v+" : "+p[v]+" , "+ newIndex[nextButOne]+" , "+ newIndex[v]);

        // Swap result.

        // Recursion.

    }

    // END exercise Sphere


    function divide_all(vertices, triangles) {

        //new_triangles = []
        let new_triangle_count = triangles.length * 4;

        // Subdivide each triangle in the old approximation and normalize
        //  the new points thus generated to lie on the surface of the unit
        //  sphere.
        // Each input triangle with vertices labelled [0,1,2] as shown
        //  below will be turned into four new triangles:
        //
        //            Make new points
        //                 a = (0+2)/2
        //                 b = (0+1)/2
        //                 c = (1+2)/2
        //        1
        //       /\        Normalize a, b, c
        //      /  \
        //    b/____\ c    Construct new triangles
        //    /\    /\       t1 [0,b,a]
        //   /  \  /  \      t2 [b,1,c]
        //  /____\/____\     t3 [a,b,c]
        // 0      a     2    t4 [a,c,2]

        let v0 = [], v1 = [], v2 = [];
        triangles.forEach((triangle) => {
            v0.push(vertices[triangle[0]]);
            v1.push(vertices[triangle[1]]);
            v2.push(vertices[triangle[2]]);
        });


        let a = [], b = [], c = [];
        let a_part, b_part, c_part;
        for (let i = 0; i < v0.length; i++) {
            a_part = [];
            b_part = [];
            c_part = [];
            for (let j = 0; j < 3; j++) {
                a_part.push((v0[i][j] + v2[i][j]) * 0.5);
                b_part.push((v0[i][j] + v1[i][j]) * 0.5);
                c_part.push((v1[i][j] + v2[i][j]) * 0.5);
            }
            a.push(a_part);
            b.push(b_part);
            c.push(c_part);
        }


        normalize_v3(a);
        normalize_v3(b);
        normalize_v3(c);

        //Stack the triangles together.
        vertices = v0.concat(b.concat(a.concat(b.concat(v1.concat(c.concat(a.concat(b.concat(c.concat(a.concat(c.concat(v2)))))))))));
        //Now our vertices are duplicated, and thus our triangle structure are unnecesarry.

        return vertices;

    }

});


function normalize_v3(arr) {

    // Normalize an array of 3 component vectors

    let lens;
    for (let i = 0; i < arr.length; i++) {
        lens = Math.sqrt(arr[i][0] ** 2 + arr[i][1] ** 2 + arr[i][2] ** 2);
        arr[i][0] /= lens;
        arr[i][1] /= lens;
        arr[i][2] /= lens;
    }

    return arr

}







